"use strict";(self.webpackChunkreactlesson2024=self.webpackChunkreactlesson2024||[]).push([[625],{2056:(s,e,t)=>{t.r(e),t.d(e,{default:()=>Z});var o=t(5043);const r="ProfileInfo_profileBackground__MuOzs",a="ProfileInfo_profile__qW4dl",i="ProfileInfo_profileImg__Zyxme",n="ProfileInfo_customInput__SS4QG",l="ProfileInfo_profileData__2lRSU",c=t.p+"static/media/contentImg.c60201f899cb4c1a585d.jpg";var p=t(1792);const d="ProfileStatus_statusWrapper__jLzZw";var u=t(579);const h=s=>{let[e,t]=(0,o.useState)(!1),[r,a]=(0,o.useState)(s.status);(0,o.useEffect)((()=>{a(s.status)}),[s.status]);return(0,u.jsxs)("div",{className:d,children:[(0,u.jsx)("p",{children:"Status: "}),e?(0,u.jsx)("input",{autoFocus:!0,onBlur:()=>{t(!1),s.updateUserStatusTC(r)},onChange:s=>{a(s.target.value)},value:r}):(0,u.jsx)("p",{onClick:()=>{t(!0)},children:r||"No status"})]})};var f=t(7701);const m="ProfileMainInfo_mainInfo__cP9VO",x="ProfileMainInfo_commonError__xh+rx";let j=s=>(0,u.jsxs)("p",{children:[s.contactKey,": ",s.contactData]});const g=s=>(0,u.jsxs)("div",{className:m,children:[(0,u.jsx)("h2",{children:s.profile.fullName}),(0,u.jsx)("p",{children:"Looking for a job?: ".concat(s.profile.lookingForAJob?"Yes":"No")}),s.profile.lookingForAJob&&(0,u.jsx)("p",{children:"Description: ".concat(s.profile.lookingForAJobDescription)}),(0,u.jsx)("p",{children:"About me: ".concat(s.profile.aboutMe)}),Object.keys(s.profile.contacts).map((e=>(0,u.jsx)(j,{contactKey:e,contactData:s.profile.contacts[e]},e))),s.isOwner&&(0,u.jsx)("div",{children:(0,u.jsx)("button",{onClick:s.setEditMode,children:"Edit data"})})]});var _=t(5963),P=t(3842),v=t(7924);const b=(0,P.A)({form:"profileMainData"})((s=>(0,u.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{children:"Full Name:"}),(0,u.jsx)(_.A,{name:"fullName",placeholder:"Full Name",component:v.p})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{children:"Looking for a job?:"}),(0,u.jsx)(_.A,{name:"lookingForAJob",placeholder:"Looking for a job?",component:v.p,type:"checkbox"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{children:"Looking for a job description:"}),(0,u.jsx)(_.A,{name:"lookingForAJobDescription",placeholder:"Description",component:v.p})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{children:"About me:"}),(0,u.jsx)(_.A,{name:"aboutMe",placeholder:"About me",component:v.p})]}),Object.keys(s.profile.contacts).map((s=>(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{children:"".concat(s,":")}),(0,u.jsx)(_.A,{name:"contacts.".concat(s),placeholder:s,component:v.p})]},s))),s.error?(0,u.jsx)("div",{className:x,children:s.error}):"",(0,u.jsx)("div",{children:(0,u.jsx)("button",{children:"Save"})})]}))),C=s=>{let[e,t]=(0,o.useState)(!1);if(!s.profile)return(0,u.jsx)(p.A,{});return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:r,children:(0,u.jsx)("img",{src:c,alt:""})}),(0,u.jsxs)("div",{className:a,children:[(0,u.jsxs)("div",{className:i,children:[(0,u.jsx)("img",{src:s.profile.photos.large||f,alt:""}),s.isOwner&&(0,u.jsxs)("label",{htmlFor:"fileInput",className:n,children:[" New photo...",(0,u.jsx)("input",{id:"fileInput",type:"file",onChange:e=>{e.target.files.length>0&&s.changeProfilePhotoTC(e.target.files[0])}})]}),(0,u.jsx)(h,{status:s.status,updateUserStatusTC:s.updateUserStatusTC})]}),(0,u.jsx)("div",{className:l,children:e?(0,u.jsx)(b,{initialValues:s.profile,onSubmit:e=>{s.setMainDataTC(e).then((()=>{t(!1)})).catch((()=>{}))},profile:s.profile}):(0,u.jsx)(g,{setEditMode:()=>{t(!0)},isOwner:s.isOwner,profile:s.profile})})]})]})},k={postBlock:"Posts_postBlock__Zy8f4",postBlockImg:"Posts_postBlockImg__frmd9",postText:"Posts_postText__7bYG4"},N="NewPostBlock_newPostBlock__1TKQf",T="NewPostBlock_formWrapper__qQFBy",I="NewPostBlock_inputWrapper__UDBbc";var S=t(508);let D=(0,S.R)(10),A=(0,P.A)({form:"postForm"})((s=>(console.log(s.touch),(0,u.jsxs)("form",{onSubmit:s.handleSubmit,className:I,children:[(0,u.jsx)("div",{children:(0,u.jsx)(_.A,{component:v.p,name:"postInput",placeholder:"your news...",validate:[S.m,D]})}),(0,u.jsx)("button",{children:"Send"})]}))));const M=s=>(0,u.jsxs)("div",{className:N,children:[(0,u.jsx)("p",{children:"My posts"}),(0,u.jsx)("div",{className:T,children:(0,u.jsx)(A,{onSubmit:e=>{s.addPost(e.postInput)}})})]}),U=t.p+"static/media/postImg.7da1abb405f492f8f5e6.png",w=s=>(console.log("render"),(0,u.jsxs)("div",{children:[(0,u.jsx)(M,{addPost:s.addPost}),(0,u.jsx)("div",{className:k.postsBlock,children:s.postMessages.map((s=>(0,u.jsxs)("div",{className:k.postBlock,children:[(0,u.jsx)("div",{className:k.postBlockImg,children:(0,u.jsx)("img",{src:U,alt:""})}),(0,u.jsx)("div",{className:k.postText,children:(0,u.jsx)("p",{children:s.textPost})})]},s.id)))})]}));var B=t(2688),y=t(3003);const F=(0,y.Ng)((s=>({postMessages:s.profilePage.postMessages})),(s=>({addPost:e=>{s((0,B._N)(e))}})))(w),O=s=>(0,u.jsxs)("div",{children:[(0,u.jsx)(C,{setMainDataTC:s.setMainDataTC,changeProfilePhotoTC:s.changeProfilePhotoTC,isOwner:s.isOwner,profile:s.profile,status:s.status,updateUserStatusTC:s.updateUserStatusTC}),(0,u.jsx)(F,{})]});var z=t(3216),E=t(5974),J=t(3923);class L extends o.Component{refreshUsersData(){let s=this.props.router.params.userId;s||(s=this.props.authorizedUserId),this.props.getProfileTC(s),this.props.getUserStatusTC(s)}componentDidMount(){this.refreshUsersData()}componentDidUpdate(s){this.props.router.params.userId!==s.router.params.userId&&this.refreshUsersData()}render(){return(0,u.jsx)(O,{setMainDataTC:this.props.setMainDataTC,changeProfilePhotoTC:this.props.changeProfilePhotoTC,isOwner:!this.props.router.params.userId,profile:this.props.profile,status:this.props.status,updateUserStatusTC:this.props.updateUserStatusTC})}}const Z=(0,J.Zz)((0,y.Ng)((s=>({profile:s.profilePage.profile,status:s.profilePage.status,authorizedUserId:s.auth.userId,isAuth:s.auth.isAuth})),{getProfileTC:B.xm,getUserStatusTC:B.lh,updateUserStatusTC:B.Yp,changeProfilePhotoTC:B.P6,setMainDataTC:B.Bn}),(function(s){return function(e){let t=(0,z.zy)(),o=(0,z.Zp)(),r=(0,z.g)();return(0,u.jsx)(s,{...e,router:{location:t,navigate:o,params:r}})}}),E.H)(L)}}]);
//# sourceMappingURL=625.77af9d7a.chunk.js.map